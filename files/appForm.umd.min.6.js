(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[6],{"0690":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-container",{staticClass:"bv-example-row bg-light p-4",attrs:{fluid:"lg"}},[i("div",{attrs:{checkUid:t.checkUid}},[i("h5",{staticClass:"titre mb-3 shadow-sm p-2"},[t._v(" Mes devis : "),i("span",{staticClass:"form-title"},[t._v(t._s(t.form.name))])])]),i("b-row",{attrs:{"align-h":"center"}},[i("b-col",{attrs:{cols:"12"}},[i("list-table",{attrs:{liste_fields_check:t.ListeFieldsCheck,liste_fields_display:t.ListeFieldsDisplay}})],1)],1)],1)],1)},a=[],n=i("5530"),r=(i("b0c0"),i("a434"),i("f158")),l=i("2f62"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-table",{staticClass:"traitement",attrs:{items:t.traitementFormItemsDisplay,fields:t.liste_fields_display,outlined:!0,hover:!0,"head-variant":"dark",responsive:"","sticky-header":!0,trigger_perfom:t.trigger_perfom},scopedSlots:t._u([{key:"cell()",fn:function(e){return[i("div",[e.item[e.field.key]&&void 0===e.item[e.field.key].type?i("div",["status"===e.field.key?i("div",[i("h5",{staticClass:"status"},[t._v(" "+t._s(1==e.item.status?"Traité":"non traité")+" ")])]):"uid"===e.field.key?i("div",["0"!==e.item.uid?i("div",[e.item.user?i("ul",{staticClass:"m-0 p-0 pl-2"},t._l(t.getInfoUser(e.item.user),(function(e,s){return i("li",{key:s},[t._v(" "+t._s(e.text)+" ")])})),0):t._e()]):i("div",[t._v("Anonyme")])]):i("div",[t._v(" "+t._s(e.value)+" ")])]):e.item[e.field.key]?i("div",[i(t.getTemplatesFiles(e.item[e.field.key].type),{tag:"component",staticClass:"content-field",attrs:{field:e.item[e.field.key]}})],1):i("div",["action"===e.field.key?i("div",[i("b-button-group",{},[i("b-button",{attrs:{variant:"outline-primary"},on:{click:function(i){return t.getValideStepe(e.index)}}},[t._v(" voir ")]),i("b-button",{attrs:{variant:"outline-success"},on:{click:function(i){return t.showResult(e.item)}}},[t._v(" Editer ")]),i("b-button",{attrs:{variant:"outline-warning"},on:{click:function(i){return t.formTraiter(e.item)}}},[t._v(" Traiter ")])],1)],1):t._e()])])]}}])}),i("b-modal",{ref:"modal",staticClass:"super-hover",attrs:{id:"modal--closing",size:"lg",title:"Résultat du formulaire",scrollable:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.traitementFormItems.length?i("b-row",{attrs:{"align-h":"center"}},t._l(t.validSteps2,(function(e,s){return i("b-col",{key:s,staticClass:"mb-4",attrs:{sm:"12"}},[void 0!==e?i("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[i("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[i("b-button",{attrs:{block:"",variant:"dark",disabled:""}},[t._v(" "+t._s(e.info.title)+" ")])],1),i("b-collapse",{attrs:{id:"accordion-option",accordion:"my-accordion",role:"tabpanel",visible:""}},[i("b-card-body",{staticClass:"p-2"},[i("b-row",{staticClass:"d-flex flex-wrap"},t._l(e.fields,(function(e,s){return i("b-col",{key:s,attrs:{cols:"12"}},[void 0===e.status||e.status?i("type-displays",{staticClass:"mb-2",attrs:{field:e}}):i("div",[i("pre",{staticClass:"d-none"},[t._v("                      "+t._s(e.name)+"\n                    ")])])],1)})),1)],1)],1)],1):t._e()],1)})),1):t._e()],1)],1)},c=[],u=(i("e260"),i("d3b7"),i("e6cf"),i("3ca3"),i("ddb0"),i("caad"),i("2532"),i("fd71")),d=i("5784"),f=i("e674"),m={name:"Listesfomes",props:{liste_fields_check:{type:Array,default:function(){return[]}},liste_fields_display:{type:Array,default:function(){return[]}}},components:{typeDisplays:function(){return i.e(4).then(i.bind(null,"5b90"))}},data:function(){return{showModal:!1,currentIndex:null,validSteps2:[],traitementFormItemsDisplay:[]}},mounted:function(){},watch:{},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["c"])(["items","CachesUser"])),Object(l["b"])(["traitementFormItems"])),{},{trigger_perfom:function(){return this.traitementFormItems.length?(this.getTraitementFormItems(),!0):""}}),methods:{getTraitementFormItems:function(){for(var t in console.log("traitementFormItems : ",this.traitementFormItemsDisplay),this.traitementFormItemsDisplay=[],this.traitementFormItems){var e=this.traitementFormItems[t],i={id:e.id,status:e.status,created:e.created,price:e.price,uid:e.uid,user:{}};for(var s in this.getUser(e.uid,i),e.datas){var a=e.datas[s];for(var n in a.fields){var r=a.fields[n];this.liste_fields_check.includes(r.name)&&(i[r.name]=r)}}this.traitementFormItemsDisplay.push(i)}},getTemplatesFiles:function(t){return d["a"].getTemplatesFiles(t)},getValideStepe:function(t){var e=this;this.showModal=!this.showModal,this.validSteps2=[];var i=this.traitementFormItems[t].datas;function s(t){var a=function(t){return new Promise((function(e){u["a"].selectNextState(i,t).then((function(t){console.log("getValideStepe : ",t),e(t)}))}))};a(t).then((function(t){t&&t<200&&(e.validSteps2.push(i[t]),s(t))}))}this.validSteps2.push(i[0]),s(0)},showResult:function(t){console.log("id",t)},formTraiter:function(t){var e="";e="0"==t.status?"1":"0",this.$bvModal.msgBoxConfirm("Confirmez-vous avoir l'action",{title:"Alerte",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"Traiter",cancelTitle:"Annuler",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(i){i&&(console.log("Refus : ",t),r["a"].deleteFormTraitement(t.id,e).then((function(){window.location.reload()})))}))},getUser:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.CachesUser["uid"+t]?i.user=this.CachesUser["uid"+t]:f["c"].getUser(t).then((function(s){i.user=s,e.$store.dispatch("setCachesUser",{uid:t,user:s})}))},getInfoUser:function(t){var e=[],i=["mail","name"];return i.forEach((function(i){t[i]&&e.push({text:t[i][0].value})})),e}}},p=m,h=(i("d77f"),i("2877")),v=Object(h["a"])(p,o,c,!1,null,null,null),b=v.exports,_={components:{ListTable:b},props:{id:{type:String,required:!0}},data:function(){return{}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["c"])(["traitementId"])),Object(l["b"])(["traitementFormItems","form","uid"])),{},{ListeFieldsDisplay:function(){var t=[{label:"Id",key:"id"},{label:"Status du formulaire",key:"status"},{label:"Price",key:"price"},{label:"#Action",key:"action",stickyColumn:!0}];for(var e in this.form.forms){var i=this.form.forms[e];for(var s in i.fields){var a=i.fields[s];a.display_field&&t.push({label:a.label,key:a.name})}}return t},ListeFieldsCheck:function(){var t=[];for(var e in this.ListeFieldsDisplay)t.push(this.ListeFieldsDisplay[e].key);return t},checkUid:function(){return!!this.uid&&(this.loadDatas(),!0)}}),methods:{loadDatas:function(){var t=this;this.uid&&this.$store.dispatch("loadTraitementDatas",{id:this.id,uid:this.uid}).then((function(){t.$store.dispatch("setTraitId",t.id),t.$store.dispatch("setFormId",t.id)}))},deleteSteps:function(t){var e=this.$store.state.allStepsDatas,i=e.indexOf(this.formDatas);this.$emit("index-to-delete",i),console.log("de",t);for(var s=e.length-1;s>=0;s--)s===i&&(e.splice(s,1),console.log("iiippp"))},saveToLocal:function(){r["a"].prepareDatasToSave(this.form).then((function(t){r["a"].saveForm(t).then((function(){}))}))},resetValue:function(){this.$store.getters.formDatas.selected="",this.$store.getters.formDatas.value=[],console.log("prev")},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},y=_,g=(i("b49c"),Object(h["a"])(y,s,a,!1,null,null,null));e["default"]=g.exports},5784:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v(" "+t._s(t.value)+" ")])},a=[],n={name:"codePostal",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value&&this.field.value.text?this.field.value.text:""}},methods:{}},r=n,l=i("2877"),o=Object(l["a"])(r,s,a,!1,null,"6f4b6259",null),c=o.exports,u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v(" "+t._s(t.field.value)+" "),i("pre",{staticClass:"d-none"},[t._v("    "+t._s(t.field)+"\n  ")])])},d=[],f={name:"defaultRender.vue",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},m=f,p=Object(l["a"])(m,u,d,!1,null,"0c33df07",null),h=p.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.getValue,(function(e,s){return i("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)])},b=[],_=i("53ca"),y={name:"select",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{getValue:function(){var t=[];if(this.field.value){var e=Object(_["a"])(this.field.value);if("object"===e)for(var i in this.field.value)t.push(this.getTextInOptions(this.field.value[i]));else t.push(this.getTextInOptions(this.field.value))}return t}},methods:{getTextInOptions:function(t){for(var e in this.field.options)if(this.field.options[e].value===t)return this.field.options[e].text}}},g=y,k=Object(l["a"])(g,v,b,!1,null,"0b966228",null),C=k.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("strong",[t._v(t._s(t.price)+" €")])])},O=[],w={name:"recapitulatif",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{price:function(){return this.field.prix&&this.field.prix.cout?this.field.prix.cout:0}},methods:{}},F=w,j=Object(l["a"])(F,x,O,!1,null,"65058f0a",null),I=j.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.field.value,(function(e,s){return i("li",{key:s,staticClass:"d-flex"},[i("span",{staticClass:"label"},[t._v(" "+t._s(e.label)+" : ")]),i("strong",{staticClass:"value"},[t._v(" "+t._s(e.value)+" ")])])})),0)])},D=[],S={name:"userlogin",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},$=S,U=Object(l["a"])($,T,D,!1,null,"955200dc",null),E=U.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.value,(function(e,s){return i("li",{key:s},[i("a",{attrs:{href:e.url,download:e.filename}},[t._v(t._s(e.filename))])])})),0)])},M=[],q={name:"file",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value.length?this.field.value:[]}},methods:{}},V=q,A=Object(l["a"])(V,L,M,!1,null,"a02ae002",null),R=A.exports;e["a"]={getTemplatesFiles:function(t){var e=h;switch(t){case"codepostal":e=c;break;case"select":e=C;break;case"checkbox":e=C;break;case"radio":e=C;break;case"recapitulatif":e=I;break;case"userlogin":e=E;break;case"file":e=R;break}return e}}},"5e76":function(t,e,i){},"99b1":function(t,e,i){},b49c:function(t,e,i){"use strict";i("5e76")},d77f:function(t,e,i){"use strict";i("99b1")}}]);
//# sourceMappingURL=appForm.umd.min.6.js.map