(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[6],{"0690":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"bv-example-row bg-light p-4",attrs:{fluid:"lg"}},[s("div",{attrs:{checkUid:t.checkUid}},[s("h5",{staticClass:"titre mb-3 shadow-sm p-2"},[t._v(" Mes devis : "),s("span",{staticClass:"form-title"},[t._v(t._s(t.form.name))])])]),s("b-row",{attrs:{"align-h":"center"}},[s("b-col",{attrs:{cols:"12"}},[s("list-table",{attrs:{liste_fields_check:t.ListeFieldsCheck,liste_fields_display:t.ListeFieldsDisplay}})],1)],1)],1)],1)},a=[],r=s("5530"),n=(s("b0c0"),s("a434"),s("f158")),o=s("2f62"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-table",{staticClass:"traitement",attrs:{items:t.traitementFormItemsDisplay,fields:t.liste_fields_display,outlined:!0,hover:!0,"head-variant":"dark",responsive:"","sticky-header":"350px"},scopedSlots:t._u([{key:"cell(status)",fn:function(e){return[s("div",[s("h5",{staticClass:"status"},[t._v(" "+t._s(1==e.item.status?"Traité":"non traité")+" ")])])]}},{key:"cell(action)",fn:function(e){return[s("b-button-group",{},[s("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(s){return t.voirForm(e.index)}}},[t._v(" voir ")]),s("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:function(s){return t.showResult(e.item)}}},[t._v(" Editer ")]),s("b-button",{attrs:{size:"sm",variant:"outline-warning"},on:{click:function(s){return t.formTraiter(e.item)}}},[t._v(" Traiter ")])],1)]}}])}),s("b-modal",{ref:"modal",staticClass:"super-hover",attrs:{id:"modal--closing",size:"lg",title:"Résultat du formulaire",scrollable:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.traitementFormItems.length?s("b-row",{attrs:{"align-h":"center"}},t._l(t.validSteps,(function(e,i){return s("b-col",{key:i,attrs:{sm:"12"}},[void 0!==e?s("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[s("b-button",{attrs:{block:"",variant:"dark",disabled:""}},[t._v(t._s(e.info.title))])],1),s("b-collapse",{attrs:{id:"accordion-option",accordion:"my-accordion",role:"tabpanel",visible:""}},[s("b-card-body",{staticClass:"p-2"},[s("b-row",{staticClass:"d-flex flex-wrap"},t._l(e.fields,(function(t,e){return s("b-col",{key:e,staticClass:"m-1",attrs:{cols:"12"}},[s("type-displays",{attrs:{fields:t}})],1)})),1)],1)],1)],1):t._e()],1)})),1):t._e()],1)],1)},c=[],d=(s("e260"),s("d3b7"),s("e6cf"),s("3ca3"),s("ddb0"),s("caad"),s("2532"),s("fd71")),u={name:"Listesfomes",props:{liste_fields_check:{type:Array,default:function(){return[]}},liste_fields_display:{type:Array,default:function(){return[]}}},components:{typeDisplays:function(){return s.e(4).then(s.bind(null,"5b90"))}},data:function(){return{showModal:!1,currentIndex:null}},mounted:function(){},watch:{},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["items"])),Object(o["b"])(["traitementFormItems"])),{},{validSteps:function(){var t,e=[];if(this.traitementFormItems.length&&null!==this.currentIndex){t=this.traitementFormItems[this.currentIndex].datas,e.push(t[0]);for(var s=0;s<t.length;s++){var i=d["a"].selectNextState(t,s);i&&(s=i,e.push(t[i]))}}return e},traitementFormItemsDisplay:function(){var t=[];for(var e in this.traitementFormItems){var s=this.traitementFormItems[e],i={id:s.id,status:s.status,created:s.created,price:s.price};for(var a in s.datas){var r=s.datas[a];for(var n in r.fields){var o=r.fields[n];this.liste_fields_check.includes(o.name)&&(i[o.name]=o.value)}}t.push(i)}return t}}),methods:{voirForm:function(t){console.log("id",t),this.currentIndex=t,this.showModal=!this.showModal},showResult:function(t){console.log("id",t)},formTraiter:function(t){var e="";e="0"==t.status?"1":"0",this.$bvModal.msgBoxConfirm("Confirmez-vous avoir l'action",{title:"Alerte",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"Traiter",cancelTitle:"Annuler",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(s){s&&(console.log("refus : ",t),n["a"].deleteFormTraitement(t.id,e).then((function(){window.location.reload()})))}))}}},f=u,m=(s("d77f"),s("2877")),h=Object(m["a"])(f,l,c,!1,null,null,null),p=h.exports,b={components:{ListTable:p},props:{id:{type:String,required:!0}},data:function(){return{}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["traitementId"])),Object(o["b"])(["traitementFormItems","form","uid"])),{},{ListeFieldsDisplay:function(){var t=[{label:"Id",key:"id"},{label:"Status du formulaire",key:"status"},{label:"Price",key:"price"},{label:"#Action",key:"action",stickyColumn:!0}];for(var e in this.form.forms){var s=this.form.forms[e];for(var i in s.fields){var a=s.fields[i];a.display_field&&t.push({label:a.label,key:a.name})}}return t},ListeFieldsCheck:function(){var t=[];for(var e in this.ListeFieldsDisplay)t.push(this.ListeFieldsDisplay[e].key);return t},checkUid:function(){return!!this.uid&&(this.loadDatas(),!0)}}),methods:{loadDatas:function(){var t=this;this.uid&&this.$store.dispatch("loadTraitementDatas",{id:this.id,uid:this.uid}).then((function(){t.$store.dispatch("setTraitId",t.id),t.$store.dispatch("setFormId",t.id)}))},deleteSteps:function(t){var e=this.$store.state.allStepsDatas,s=e.indexOf(this.formDatas);this.$emit("index-to-delete",s),console.log("de",t);for(var i=e.length-1;i>=0;i--)i===s&&(e.splice(i,1),console.log("iiippp"))},saveToLocal:function(){n["a"].prepareDatasToSave(this.form).then((function(t){n["a"].saveForm(t).then((function(){}))}))},resetValue:function(){this.$store.getters.formDatas.selected="",this.$store.getters.formDatas.value=[],console.log("prev")},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},v=b,y=(s("b49c"),Object(m["a"])(v,i,a,!1,null,null,null));e["default"]=y.exports},"5e76":function(t,e,s){},"99b1":function(t,e,s){},b49c:function(t,e,s){"use strict";s("5e76")},d77f:function(t,e,s){"use strict";s("99b1")}}]);
//# sourceMappingURL=appForm.umd.min.6.js.map