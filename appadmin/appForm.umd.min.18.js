(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[18],{"379c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"bv-example-row bg-light p-5",attrs:{fluid:"lg"}},[s("div",[s("h5",{staticClass:"titre mb-3 shadow-sm p-2"},[t._v(" Traitement : "),s("span",{staticClass:"form-title"},[t._v(t._s(t.form.name))])])]),s("b-row",{attrs:{"align-h":"center"}},[s("b-col",{attrs:{cols:"12"}},[s("list-table",{attrs:{liste_fields_check:t.ListeFieldsCheck,liste_fields_display:t.ListeFieldsDisplay}})],1)],1)],1)],1)},i=[],r=s("5530"),n=(s("b0c0"),s("a434"),s("f158")),o=s("2f62"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-table",{attrs:{items:t.traitementFormItemsDisplay,fields:t.liste_fields_display,outlined:!0,hover:!0,"head-variant":"dark"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[s("b-button-group",{},[s("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(s){return t.voirForm(e.index)}}},[t._v(" voir ")]),s("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:function(s){return t.showResult(e.index)}}},[t._v(" Traiter ")])],1)]}}])}),s("b-modal",{ref:"modal",staticClass:"super-hover",attrs:{id:"modal--closing",size:"lg",title:"RÃ©sultat du formulaire",scrollable:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.traitementFormItems.length?s("b-row",{attrs:{"align-h":"center"}},t._l(t.validSteps,(function(e,a){return s("b-col",{key:a,attrs:{sm:"12"}},[s("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[s("b-button",{attrs:{block:"",variant:"dark",disabled:""}},[t._v(t._s(e.info.title))])],1),s("b-collapse",{attrs:{id:"accordion-option",accordion:"my-accordion",role:"tabpanel",visible:""}},[s("b-card-body",{staticClass:"p-2"},[s("b-row",{staticClass:"d-flex flex-wrap"},t._l(e.fields,(function(t,e){return s("b-col",{key:e,staticClass:"m-1",attrs:{cols:"12"}},[s("type-displays",{attrs:{fields:t}})],1)})),1)],1)],1)],1)],1)})),1):t._e()],1)],1)},c=[],d=(s("e260"),s("d3b7"),s("e6cf"),s("3ca3"),s("ddb0"),s("caad"),s("2532"),s("fd71")),u={name:"Listesfomes",props:{liste_fields_check:{type:Array,default:function(){return[]}},liste_fields_display:{type:Array,default:function(){return[]}}},components:{typeDisplays:function(){return s.e(19).then(s.bind(null,"5b90"))}},data:function(){return{showModal:!1,currentIndex:null}},mounted:function(){},watch:{},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["items"])),Object(o["b"])(["traitementFormItems"])),{},{validSteps:function(){var t,e=[];if(this.traitementFormItems.length&&null!==this.currentIndex){t=this.traitementFormItems[this.currentIndex].datas,e.push(t[0]);for(var s=0;s<t.length;s++){var a=d["a"].selectNextState(t,s);a&&(s=a,e.push(t[a]))}}return e},traitementFormItemsDisplay:function(){var t=[];for(var e in this.traitementFormItems){var s=this.traitementFormItems[e],a={id:s.id,status:s.status,created:s.created,price:s.price};for(var i in s.datas){var r=s.datas[i];for(var n in r.fields){var o=r.fields[n];this.liste_fields_check.includes(o.name)&&(a[o.name]=o.value)}}t.push(a)}return t}}),methods:{voirForm:function(t){console.log("id",t),this.currentIndex=t,this.showModal=!this.showModal},showResult:function(t){console.log("id",t)}}},f=u,m=s("2877"),h=Object(m["a"])(f,l,c,!1,null,null,null),p=h.exports,b={components:{ListTable:p},props:{id:{type:String,required:!0}},data:function(){return{}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){var t=this;this.$store.dispatch("loadTraitementDatas",this.id).then((function(){t.$store.dispatch("setTraitId",t.id),t.$store.dispatch("setFormId",t.id)}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])(["traitementId"])),Object(o["b"])(["traitementFormItems","form"])),{},{ListeFieldsDisplay:function(){var t=[{label:"Id",key:"id"},{label:"Status du formulaire",key:"status"},{label:"Price",key:"price"},{label:"#Action",key:"action"}];for(var e in this.form.forms){var s=this.form.forms[e];for(var a in s.fields){var i=s.fields[a];i.display_field&&t.push({label:i.label,key:i.name})}}return t},ListeFieldsCheck:function(){var t=[];for(var e in this.ListeFieldsDisplay)t.push(this.ListeFieldsDisplay[e].key);return t}}),methods:{deleteSteps:function(t){var e=this.$store.state.allStepsDatas,s=e.indexOf(this.formDatas);this.$emit("index-to-delete",s),console.log("de",t);for(var a=e.length-1;a>=0;a--)a===s&&(e.splice(a,1),console.log("iiippp"))},saveToLocal:function(){n["a"].prepareDatasToSave(this.form).then((function(t){n["a"].saveForm(t).then((function(){}))}))},resetValue:function(){this.$store.getters.formDatas.selected="",this.$store.getters.formDatas.value=[],console.log("prev")},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},v=b,y=(s("60ad"),Object(m["a"])(v,a,i,!1,null,null,null));e["default"]=y.exports},"60ad":function(t,e,s){"use strict";s("6653")},6653:function(t,e,s){}}]);
//# sourceMappingURL=appForm.umd.min.18.js.map