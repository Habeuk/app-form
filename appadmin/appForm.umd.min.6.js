(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[6],{3734:function(t,e,s){"use strict";s("54f5")},"3db8":function(t,e,s){"use strict";s("b1ee")},"54f5":function(t,e,s){},b1ee:function(t,e,s){},ca0f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",{staticClass:"p-md-5",attrs:{fluid:"lg"}},[s("div",[s("h5",{staticClass:"titre mb-3 shadow-sm p-2"},[t._v(" Gestion du formulaire: "),s("span",{staticClass:"form-title"},[t._v(t._s(t.form.name))])])]),s("b-row",{attrs:{"align-h":"center"}},[t.formDatas&&t.formDatas.info?s("b-col",{attrs:{cols:"12",lg:"10"}},[s("transition",{attrs:{name:"fade"}},[s("div",[s("nav-line",{attrs:{taille:t.id}}),s("pages",{attrs:{level:t.stepsIndex}})],1)])],1):t._e(),t.$store.state.mode?s("b-col",{attrs:{cols:"12",lg:"2"}},[s("div",{staticClass:"block-button"},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"shadow-md d-block w-100",attrs:{variant:"light",squared:""}},[t._v(" Configuration ")]),s("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"},on:{click:t.clearFormDatas}},[t._v(" Ajouter une etape ")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.re-order-stepes",modifiers:{"re-order-stepes":!0}}],staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"}},[t._v(" Re-ordonner les etapes ")]),s("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"secondary"},on:{click:t.resetValue}},[t._v(" Reset value ")]),s("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"success"},on:{click:t.saveToLocal}},[t._v(" Enregistrer ")]),s("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Edition du formulaire","hide-footer":""},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[t.formDatas&&t.formDatas.info?s("form",{ref:"form",on:{submit:t.handleSubmit,reset:t.resetModal}},[s("b-row",[s("b-col",{attrs:{cols:"8"}},[s("b-form-group",{attrs:{label:"name","label-for":"name-input"}},[s("b-form-input",{attrs:{id:"db-input",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),s("b-col",{attrs:{cols:"8"}},[s("b-form-group",{attrs:{label:"Id","label-for":"description-input"}},[s("b-form-input",{attrs:{id:"desc-input-id"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),s("b-col",{attrs:{cols:"8"}},[s("b-form-group",{attrs:{label:"Description","label-for":"description-input"}},[s("b-form-textarea",{attrs:{id:"desc-input",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),s("hr",{staticClass:"my-3"}),s("b-row",{attrs:{"align-h":"end"}},[s("div",{staticClass:"mr-3"},[s("b-button",{staticClass:"mr-2"},[t._v(" export ")]),s("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[t._v(" Mise à jour ")])],1)])],1):t._e()])],1)]):t._e()],1)],1),s("reOrderStepes")],1)},o=[],r=s("5530"),i=(s("a434"),s("caad"),s("f158")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-line"},t._l(t.idLevel,(function(e,a){return s("div",{key:a,staticClass:"w-100"},[s("b-button",{staticClass:"nav-line__nav",class:a==t.stepsIndex?"nav-line__nav--dark":"",attrs:{title:"Etape "+a,variant:"info",id:"tooltip-1"+a},on:{click:function(e){return t.loadSteps(a)}}}),s("b-tooltip",{attrs:{target:"tooltip-1"+a,triggers:"hover",variant:"info"}},[s("b",[t._v("etape "+t._s(a))]),t._v(" "),s("br"),s("div",[t._v(t._s(t.form.forms[a].info.title))])])],1)})),0)},l=[],d=(s("a9e3"),s("2f62")),c={props:{taille:{require:!0}},components:{},data:function(){return{value:1}},watch:{taille:function(){}},mounted:function(){var t=localStorage.getItem("step"),e=localStorage.getItem("id");null!==e&&t.length&&e==this.taille?this.$store.state.stepsIndex=Number(t):this.$store.state.stepsIndex=0},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(d["c"])(["stepsIndex"])),Object(d["b"])(["form"])),{},{idLevel:function(){var t=[];if(this.form.forms.length)for(var e in this.form.forms)t.push(e);return t}}),methods:{loadSteps:function(t){this.$store.state.stepsIndex=t,localStorage.setItem("step",t),localStorage.setItem("id",this.taille)}}},f=c,u=(s("3734"),s("2877")),m=Object(u["a"])(f,n,l,!1,null,null,null),p=m.exports,h=s("0b91"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-modal",{ref:"modal",attrs:{id:"re-order-stepes",title:"Re-ordonner les etapes","hide-footer":"",size:"lg"}},[s("b-list-group",t._l(t.form.forms,(function(e,a){return s("b-list-group-item",{key:a},[s("div",{staticClass:"d-flex align-items-center"},[s("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.modeToUp(a)}}},[s("b-icon",{attrs:{icon:"arrow-bar-up"}})],1),s("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.moveToDown(a)}}},[s("b-icon",{attrs:{icon:"arrow-bar-down"}})],1),s("div",{staticClass:"pl-5",class:[e.states&&e.states.length>0?"ml-5":""]},[t._v(" "+t._s(a)+" : "+t._s(e.info.title)+" "),e.states&&e.states.length>0?s("div",t._l(e.states,(function(e,a){return s("div",{key:a},[s("small",[t._v(" "+t._s(t.getNameStep(e.state_name))+" ")])])})),0):t._e()])],1)])})),1),s("div",{staticClass:"justify-content-end d-flex"},[s("div",{staticClass:"mx-2 my-4"},[s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.$bvModal.hide("re-order-stepes")}}},[t._v(" Mettre à jour ")])],1)])],1)],1)},v=[],g=(s("b0c0"),s("2c10")),_={name:"reOrderStepes",props:{},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:Object(r["a"])({},Object(d["b"])(["form"])),methods:{moveToDown:function(t){var e=t+1;g["a"].array_move(this.form.forms,t,e)},modeToUp:function(t){var e=t-1;g["a"].array_move(this.form.forms,t,e)},getNameStep:function(t){for(var e in this.form.forms)if(this.form.forms[e].info.name===t)return this.form.forms[e].info.title}}},D=_,S=Object(u["a"])(D,b,v,!1,null,"805956ce",null),$=S.exports,x={components:{pages:h["a"],NavLine:p,reOrderStepes:$},props:{id:{type:String,required:!0}},data:function(){return{datasBd:[],stepsId:1,demo:!0,title:"",datasBase:{description:"",id:null,forms:"",name:""}}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){this.$store.dispatch("setFormId",this.id)},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(d["c"])(["stepsIndex","allStepsDatas","fields","price","mode","priceAide"])),Object(d["b"])(["form","formDatas"])),{},{currentSteps:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);return null!=e&&e.length?e[this.$store.state.stepsIndex]:this.formDatas},stepsDatas:function(){var t=this.datasBd;return this.datasBd.length?(console.log("object io",t[this.stepsId-1]),t[this.stepsId-1]):"vide"}}),methods:{deleteSteps:function(t){var e=this.$store.state.allStepsDatas,s=e.indexOf(this.formDatas);this.$emit("index-to-delete",s),console.log("de",t);for(var a=e.length-1;a>=0;a--)a===s&&(e.splice(a,1),console.log("iiippp"))},datasBdOrLocalStorage:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);if(console.log("loaaaa",e),"vide"!=this.stepsDatas){this.datasBase=this.stepsDatas,console.log("aaa",this.datasBase);var s=JSON.parse(this.datasBase.forms);this.$store.state.allStepsDatas=s,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex]}else null!=e&&e.length?(console.log("appppaaa",e),this.$store.state.allStepsDatas=e,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex]):"vide"==this.stepsDatas&&alert("Désolé nous n'avons pas pue accéder à la BD  et vous n'avez aucune données dans votre localStorage")},saveToLocal:function(){i["a"].prepareDatasToSave(this.form).then((function(t){i["a"].saveForm(t).then((function(){}))}))},back:function(){this.$store.state.stepsIndex--,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex],this.$store.state.fields=this.$store.state.formDatas.fields[0],console.log("back")},suivant:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t),s=this.$store.state.stepsIndex;e.length>=1&&s<e.length-1&&(console.log("local0",e.length),this.$store.state.stepsIndex++,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex],this.$store.state.fields=this.$store.state.formDatas.fields[0]),console.log("base",this.currentSteps.length)},preview:function(){this.demo=!this.demo,console.log("prev",this.demo)},clearFormDatas:function(){var t={info:{headerTitle:"",title:"",name:""},fields:[]};this.form.forms.push(t),this.$store.state.stepsIndex=this.form.forms.length-1},resetValue:function(){var t=["radio","text","select","number","radiodesc","codepostal"],e=["checkbox"];for(var s in this.formDatas.fields){var a=this.formDatas.fields[s];t.includes(a.type)?a.value=null:e.includes(a.type)&&(a.value=[])}},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},k=x,w=(s("3db8"),Object(u["a"])(k,a,o,!1,null,null,null));e["default"]=w.exports}}]);
//# sourceMappingURL=appForm.umd.min.6.js.map